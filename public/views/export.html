<div
  class="topbar-container"
  ng-include="'views/includes/topbar.html'"
  ng-init="titleSection='Export'; goBackToState = 'preferencesAdvanced'; useTheme = false">
</div>



<ion-content class="content preferences" ng-controller="exportController as exportC"
  ng-class="{'status-bar-content':index.useViewManagedStatusBar}" ng-style="{'background':skin.view.viewBackground}">
  <h4 ng-style="{'background':skin.view.viewBackground}"></h4>
  <div ng-show="!exportC.backupWalletPlainText">
      <div class="size-14 m20b" ng-style="{'color':skin.view.viewAlertTextColor}" ng-show="exportC.error">
        <i class="fi-alert size-12"></i>
        <span translate> Failed to export </span>
      </div>

      <div class="row">
        <div class="columns">
          <div class="size-14 m20b" ng-style="{'color':skin.view.viewAlertTextColor}" ng-show="exportC.isEncrypted">
            <i class="fi-alert size-12"></i>
            <span translate> The private key for this wallet is encrypted. Exporting keep the private key encrypted in the export archive.</span>

          </div>
        </div>
      </div>

      <form ng-style="{'background':skin.view.viewListItemBackground}">
        <div class="row">
          <div class="columns">
            <label for="password" ng-style="{'color':skin.view.viewPrimaryTextColor}" translate>Set up an Spending Password </label>
            <div class="input">
              <input type="password" class="form-control"
                                     placeholder="{{'Your spending password'|translate}}"
                                     name="password" ng-model="exportC.password"
                                     ng-style="{'color':skin.view.viewSecondaryTextColor, 'border-bottom-color':skin.view.viewListItemSeparatorColor}">
            </div>

            <label for="password" ng-style="{'color':skin.view.viewPrimaryTextColor}" translate>Repeat spending password</label>
            <div class="input">
              <input type="password" class="form-control"
                                     placeholder="{{'Repeat password'|translate}}"
                                     name="password" ng-model="exportC.repeatpassword"
                                     ng-style="{'color':skin.view.viewSecondaryTextColor, 'border-bottom-color':skin.view.viewListItemSeparatorColor}">
            </div>
          </div>
        </div>
      </form>

      <h4 ng-style="{'background':skin.view.viewBackground}"></h4>

      <ul class="no-bullet m0">
        <li ng-style="{'background':skin.view.viewListItemBackground, 'border-bottom-color':skin.view.viewListItemSeparatorColor}">
        <span class="right">
          <label class="toggle">
             <input type="checkbox" id="no-metaData" name="metaData" ng-model="exportC.metaData">
             <div class="track">
               <div class="handle"></div>
             </div>
          </label>
        </span>
        <span ng-style="{'color':skin.view.viewPrimaryTextColor}" translate>Include address book and history cache</span>
        </li>
      </ul>
      
      <ul class="no-bullet m0" ng-show="index.canSign">
        <li ng-style="{'background':skin.view.viewListItemBackground, 'border-bottom-color':skin.view.viewListItemSeparatorColor}">
        <span class="right">
          <label class="toggle">
             <input type="checkbox" id="no-sign" name="noSign" ng-model="exportC.noSign">
             <div class="track">
               <div class="handle"></div>
             </div>
          </label>
        </span>
        <span ng-style="{'color':skin.view.viewPrimaryTextColor}" translate>Do not include private key</span>
        </li>
      </ul>


      <div class="box-notification"  ng-show="!index.canSign"
        ng-style="{'background':skin.view.viewListItemBackground, 'border-bottom-color':skin.view.viewListItemSeparatorColor}">
        <span class="size-14" ng-style="{'color':skin.view.viewAlertTextColor}">
          <span translate>
          <i class="fi-alert"></i>&nbsp;WARNING: The private key of this wallet is not available. The export allows to check the wallet balance, transaction history, and create spend proposals from the export. However, does not allow to approve (sign) proposals, so <b>funds will not be accessible from the export</b>.
          </span>
        </span>
      </div>


      <div class="box-notification" ng-show="exportC.noSign"
        ng-style="{'background':skin.view.viewListItemBackground, 'border-bottom-color':skin.view.viewListItemSeparatorColor}">
        <span class="size-14" ng-style="{'color':skin.view.viewAlertTextColor}">
          <span translate>
          <i class="fi-alert"></i>&nbsp;WARNING: Not including the private key allows to check the wallet balance, transaction history, and create spend proposals from the export. However, does not allow to approve (sign) proposals, so <b>funds will not be accessible from the export</b>.
          </span>
        </span>
      </div>

      <div class="row">
        <div class="columns">
          <button class="black round expand m20t" ng-click="exportC.downloadWalletBackup()"
            ng-disabled="(!exportC.password || exportC.password != exportC.repeatpassword)"
            ng-style="{'background':skin.view.primaryButtonBackground, 'border':skin.view.primaryButtonBorder, 'color':skin.view.primaryButtonTextColor}"
            ng-show="!index.isSafari && !index.isCordova"><i class="fi-download"></i>
            <span translate>Download</span></button>
          <button class="black round expand m20t" ng-click="exportC.viewWalletBackup()"
            ng-disabled="(!exportC.password || exportC.password != exportC.repeatpassword)"
            ng-style="{'background':skin.view.primaryButtonBackground, 'border':skin.view.primaryButtonBorder, 'color':skin.view.primaryButtonTextColor}"
            ng-show="index.isSafari && !index.isCordova"><i class="fi-eye"></i>
            <span translate>View</span></button>
          <div ng-show="index.isCordova">
            <h4 translate ng-style="{'color':skin.view.viewPrimaryTextColor, 'background':skin.view.viewBackground}">Export options</h4>
            <button class="black round expand" ng-disabled="(!exportC.password || exportC.password != exportC.repeatpassword)"
              ng-style="{'background':skin.view.primaryButtonBackground, 'border':skin.view.primaryButtonBorder, 'color':skin.view.primaryButtonTextColor}"
              ng-click="exportC.copyWalletBackup()"><i class="fi-clipboard-pencil"></i>
              <span translate>Copy to clipboard</span></button>
            <button class="black round expand" ng-disabled="(!exportC.password || exportC.password != exportC.repeatpassword)"
              ng-style="{'background':skin.view.primaryButtonBackground, 'border':skin.view.primaryButtonBorder, 'color':skin.view.primaryButtonTextColor}"
              ng-click="exportC.sendWalletBackup()"><i class="fi-mail"></i>
              <span translate>Send by email</span></button>
          </div>
        </div>
      </div>    
  </div>

  <div class="row" ng-show="exportC.backupWalletPlainText">
    <div class="large-12 columns">
      <h3 ng-style="{'color':skin.view.viewPrimaryTextColor}" translate>Wallet Export</h3>
      <div class="input">
        <textarea rows="12" ng-style="{'color':skin.view.viewSecondaryTextColor, 'border-bottom-color':skin.view.viewListItemSeparatorColor}">
          {{exportC.backupWalletPlainText}}</textarea>
      </div>
      <div class="size-12 text-gray text-right" ng-style="{'color':skin.view.viewSecondaryTextColor}">
        <i class="icon-compose"></i>
        <span translate>Copy this text as it is to a safe place (notepad or email)</span>
      </div>
    </div>
  </div>

  <div class="extra-margin-bottom"></div>
</ion-content>
