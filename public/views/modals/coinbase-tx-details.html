<ion-modal-view ng-controller="coinbaseTxDetailsController">
  <nav class="tab-bar"
    ng-class="{'status-bar-space': index.useViewManagedStatusBar}" ng-style="{'background':theme.view.navBarBackground, 'border-bottom':theme.view.navBarBorderBottom}">

    <!-- status bar -->
    <div ng-class="index.useViewManagedStatusBar ? 'status-bar' : 'no-status-bar'"
      ng-style="{'background': theme.view.statusBarBackground, 'border-bottom': theme.view.statusBarBorderBottom}">
    </div>

    <div class="pr">

      <section class="left-small">
        <a ng-click="cancel()" ng-style="{'color':theme.view.navBarButtonTextColor}">
          <i class="icon-arrow-left3 icon-back"></i>
          <span class="text-back">Back</span>
        </a>
      </section>
      <section class="middle tab-bar-section">
        <h1 class="title ellipsis" ng-style="{'color':theme.view.navBarTitleColor}">
          Details
        </h1>
      </section>

    </div>
  </nav>

  <ion-content class="modal-content"
    ng-class="{'status-bar-content':index.useViewManagedStatusBar}" ng-style="{'background':theme.view.viewBackground}">

    <div class="header-modal bg-gray text-center"
      ng-style="{'background':theme.view.viewSectionHeaderBackground}">
      <div class="p20">
        <img src="img/bought.svg" alt="bought" width="65" ng-show="(tx.type == 'buy' || (tx.type == 'send' && tx.to)) && tx.status == 'completed'">
        <img src="img/bought-pending.svg" alt="bought" width="65" 
        ng-show="(tx.type == 'buy' || (tx.type == 'send' && tx.to)) && tx.status != 'completed'">
        <img src="img/sold.svg" alt="bought" width="65" ng-show="tx.type == 'sell' && tx.status == 'completed'">
        <img src="img/sold-pending.svg" alt="bought" width="65" 
          ng-show="(tx.type == 'sell' || (tx.type == 'send' && tx.from)) && tx.status != 'completed'">
      </div>
      <div ng-show="tx.status == 'completed'">
        <span ng-show="tx.type == 'buy' || tx.type == 'send'" ng-style="{'color':theme.view.viewPrimaryTextColor}">Bought</span>
        <span ng-show="tx.type == 'sell'" ng-style="{'color':theme.view.viewPrimaryTextColor}">Sold</span>
      </div>
      <div ng-show="tx.type == 'send' && (tx.to || tx.from) && tx.status != 'completed'">
        <span ng-show="tx.to" ng-style="{'color':theme.view.viewPrimaryTextColor}">Receiving purchased bitcoin</span>
        <span ng-show="tx.from" ng-style="{'color':theme.view.viewPrimaryTextColor}">Sending bitcoin to sell</span>
      </div>
      <div ng-show="(tx.type == 'sell' || tx.type == 'buy') && tx.status != 'completed'">
        <span ng-show="tx.type == 'buy'" ng-style="{'color':theme.view.viewPrimaryTextColor}">Buying bitcoin</span>
        <span ng-show="tx.type == 'sell'" ng-style="{'color':theme.view.viewPrimaryTextColor}">Selling bitcoin</span>
      </div>
      <div class="size-24 text-bold" ng-style="{'color':theme.view.viewSecondaryTextColor}">
        <span ng-if="tx.type == 'sell' || (tx.type == 'send' && tx.from)">-</span>{{tx.amount.amount.replace('-','')}} 
        {{tx.amount.currency}}
      </div>
      <div class="label gray radius m10b" ng-style="{'color':theme.view.viewSecondaryTextColor}">
        <span ng-if="tx.type == 'sell' || (tx.type == 'send' && tx.from)">-</span>{{tx.native_amount.amount.replace('-','')}}
        {{tx.native_amount.currency}}
      </div>
    </div>


    <div class="m20b box-notification" ng-show="tx.error">
      <ul class="no-bullet m0 text-warning size-12" ng-style="{'color':theme.view.viewAlertTextColor}">
        <li ng-repeat="err in tx.error.errors" ng-bind-html="err.message"></li>
      </ul>
    </div>

    <ul class="no-bullet size-14">

      <li ng-show="tx.details && tx.status != 'pending'" class="line-b p10 oh">
        <span class="text-gray" ng-style="{'color':theme.view.viewPrimaryTextColor}">{{tx.details.title}}</span>
        <span class="right" ng-style="{'color':theme.view.viewSecondaryTextColor}">{{tx.details.subtitle}}</span>
      </li>

      <li class="line-b p10 oh">
        <span class="text-gray" ng-style="{'color':theme.view.viewPrimaryTextColor}">Status</span>
        <span class="right" ng-style="{'color':theme.view.viewSuccessTextColor}" ng-if="tx.status == 'completed'">Completed</span>
        <span class="right" ng-style="{'color':theme.view.viewInfoTextColor}" ng-if="tx.status == 'pending'">Pending</span>
        <span class="right" ng-style="{'color':theme.view.viewAlertTextColor}"ng-if="tx.status == 'error'">Error</span>
      </li>

      <li ng-show="tx.created_at" class="line-b p10 oh">
        <span class="text-gray" ng-style="{'color':theme.view.viewPrimaryTextColor}">Date</span>
        <span class="right" ng-style="{'color':theme.view.viewSecondaryTextColor}">{{tx.created_at | amCalendar}}</span>
      </li>

      <li ng-show="tx.price_sensitivity" class="line-b p10 oh">
        <span class="text-gray" ng-style="{'color':theme.view.viewPrimaryTextColor}">Price Sensitivity</span>
        <span class="right" ng-style="{'color':theme.view.viewSecondaryTextColor}">{{tx.price_sensitivity.name}}</span>
      </li>

      <li ng-show="tx.sell_price_amount" class="line-b p10 oh">
        <span class="text-gray" ng-style="{'color':theme.view.viewPrimaryTextColor}">Sell Price</span>
        <span class="right" ng-style="{'color':theme.view.viewSecondaryTextColor}">{{tx.sell_price_amount}} {{tx.sell_price_currency}}</span>
      </li>

      <li ng-show="tx.description" class="line-b p10 oh">
        <span class="text-gray" ng-style="{'color':theme.view.viewPrimaryTextColor}" ng-show="tx.from && tx.type == 'send'">Sent bitcoin from</span>
        <span class="text-gray" ng-style="{'color':theme.view.viewPrimaryTextColor}" ng-show="tx.to && tx.type == 'send'">Receive bitcoin in</span>
        <span class="right text-bold" ng-style="{'color':theme.view.viewSecondaryTextColor}">{{tx.description}}</span>
      </li>
    </ul>

    <div class="row m20t p20t line-t" ng-show="tx.status == 'error'">
      <div class="columns">
        <p class="text-center size-12 text-gray" ng-style="{'color':theme.view.viewPrimaryTextColor}">
          This action will remove the transaction.
        </p>
        <button class="button outline round dark-gray expand tiny" 
                ng-click="remove(tx);"
                ng-disabled="loading"
                ng-style="{'background':theme.view.secondaryButtonBackground, 'border':theme.view.secondaryButtonBorder, 'color':theme.view.secondaryButtonTextColor}">
          <i class="fi-x"></i>
          Remove
        </button>
      </div>
    </div>

    <div class="extra-margin-bottom"></div>
  </ion-content>
</ion-modal-view>
